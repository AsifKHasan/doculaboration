% BEGIN Document
% BEGIN Macros and configs

  \usemodule{simplefonts}
  % \usemodule[ntb-to-xtb]
  \replacemissingcharacters
  \enabletrackers[fonts.missing]
  \setupinteraction[state=start]
  \setuppagenumbering[alternative=singlesided, location=]

  % Language = English
  \mainlanguage[en]

  % macro for changing font size
  % \define[1]\globalfsize{\fullrestoreglobalbodyfont\switchtobodyfont[#1]}
  \define[1]\fontSize{\switchtobodyfont[#1]}
  \define[1]\fontFace{\switchtobodyfont[#1]}

  %% double sided
  % \setuppagenumbering[alternative=doublesided]

  % footnote configuration
  \setupnotation[footnote][way=bypage]
  \setupnote[footnote][]
  
% END   Macros and configs


% BEGIN Fonts and fallbacks
  \definefontfeature[default][
    language=dflt,
    script=bng2,
    % script=beng,
    % mode none ensures কি, কে is rendered properly
    mode=node,
    kern=yes,
    liga=yes,
    tlig=yes,
    ccmp=yes,
    cpsp=yes,
    protrusion=
    quality,
    expansion=
    quality,
    analyze=yes,
    devanagari=yes,
    keepligatures=yes,
    compat-ligatures=yes,
    char-ligatures=yes,
    compose=yes,
    abvm=yes,
    blwm=yes,
    dist=yes,
    mark=yes,
    abvs=yes,
    akhn=yes,
    blwf=yes,
    blws=yes,
    cjct=yes,
    half=yes,
    haln=yes,
    init=yes,
    nukt=yes,
    pres=yes,
    pstf=yes,
    psts=yes,
    rclt=yes,
    rphf=yes,
  ]

  \definefallbackfamily [mainfont] [rm] [notoserifbengali]    [range=bengali]
  \definefontfamily     [mainfont] [rm] [Latin Modern Roman]
  \definefallbackfamily [mainfont] [ss] [notosansbengali]     [range=bengali]
  \definefontfamily     [mainfont] [ss] [Latin Modern Sans]
  \definefontfamily     [mainfont] [tf] [Latin Modern Roman]
  \definefontfamily     [mainfont] [mm] [TeX Gyre Pagella Math]
  \setupbodyfont        [mainfont,10pt]


  %% fallbacks for Bangla
  % \definefontfallback [bangla_regular]    [name:Noto Serif Bengali]
  %                     [0x0980:0x09FF] [force=yes]
  % \definefontfallback [bangla_bold]       [name:Noto Serif Bengali Bold]
  %                     [0x0980:0x09FF] [force=yes]
  % \definefontfallback [bangla_italic]     [name:Noto Serif Bengali Italic]
  %                     [0x0980:0x09FF] [force=yes]
  % \definefontfallback [bangla_bolditalic] [name:Noto Serif Bengali Bold Italic]
  %                     [0x0980:0x09FF] [force=yes]

  %% Now we hook the fallbacks into their respective type faces.
  % \starttypescript [serif] [mainfont]
  %     \setups[font:fallback:serif]
  %         \definefontsynonym [Serif]           [name:Computer Modern Roman]             [fallbacks=bangla_regular]
  %         \definefontsynonym [SerifBold]       [name:Computer Modern Roman Bold]        [fallbacks=bangla_bold]
  %         \definefontsynonym [SerifItalic]     [name:Computer Modern Roman Italic]      [fallbacks=bangla_italic]
  %         \definefontsynonym [SerifBoldItalic] [name:Computer Modern Roman Bold Italic] [fallbacks=bangla_bolditalic]
  % \stoptypescript

  %% Complete the typescript for all four type faces. Note that we default
  %% to the predefined Latin Modern setups for the three other faces.
  % \starttypescript [mainfont]
  %     \definetypeface [mainfont] [rm] [serif] [mainfont]     [default]
  %     \definetypeface [mainfont] [ss] [sans]  [modern] [default]
  %     \definetypeface [mainfont] [tt] [mono]  [modern] [default]
  %     \definetypeface [mainfont] [mm] [math]  [modern] [default]
  % \stoptypescript


  %% Font = Latin Modern, 10 point
  % \setupbodyfont[mainfont,10pt]

% END   Fonts and fallbacks


% BEGIN Heading styles

  % Heading 0
  \setuphead[title][style=\bfd\sc, align={center}, color=darkgray, before={\vskip 0pt}, after={\startcolor[darkgray]\hrule\stopcolor\medskip}]

  % Heading 1
  \setuphead[chapter][hidenumber=yes, number=no, style=\bfc\sc, align={center}, color=darkcyan, before={\vskip 0pt}, after={\startcolor[darkcyan]\hrule\stopcolor\medskip}]

  % Heading 2
  \setuphead[section][hidenumber=yes, number=no, style=\bfb, before={\vskip 0pt}]

  % Heading 3
  \setuphead[subsection][hidenumber=yes, number=no, style=\bfa, before={\vskip 0pt}]

  % Heading 4
  \setuphead[subsubsection][hidenumber=yes, number=no, style=\bf, before={\vskip 0pt}]

  % we do not want Figure/Table prefix/label in the caption or in the LoF/LoT
  \setuplabeltext[figure=,table=]
  \setupprefixtext[figure=,table=]

  % figure caption
  \setupcaption[figure][number=none, prefix=no, numbersegments=0, style=\sl\sc, align=center, color=darkgray]
  
  % table caption
  \setupcaption[table][number=none, prefix=no, numbersegments=0, style=\sl\sc, align=center, color=darkgray]
  
% END   Heading styles


% BEGIN ToC Formatting

  \setupcombinedlist[content][list={chapter,section,subsection,subsubsection}, alternative=c,]

  \setuplist[chapter]       [width=0.1in, margin=0.0in, style=\bfa]
  \setuplist[section]       [width=0.2in, margin=0.2in, style=\tf]
  \setuplist[subsection]    [width=0.3in, margin=0.4in, style=\tfx]
  \setuplist[subsubsection] [width=0.4in, margin=0.5in, style=\tfx\sl, pagestyle=normal]

  \setuplist[figure]        [headnumber=no, style=\tfx, pagestyle=normal, alternative=c,]
  \setuplist[table]         [headnumber=no, style=\tfx, pagestyle=normal, alternative=c,]

% END   ToC Formatting


